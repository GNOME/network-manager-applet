2007-10-26  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_constructor, applet_add_default_ethernet_connection): add a
			default ethernet connection if no connections were found.  Helps
			out livecds.

2007-10-26  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
	  vpn-password-dialog.c
		- Ensure errors are returned to NM when something goes wrong with
			the GetSecrets request, or when the VPN auth dialog is
			canceled

2007-10-26  Dan Williams  <dcbw@redhat.com>

	* src/wireless-dialog.c
		- (security_combo_init): don't try accessing EAP method if EAP isn't
			configured

2007-10-26  Dan Williams  <dcbw@redhat.com>

	* (clear_vpn_details_widget, vpn_druid_vpn_type_page_next, edit_cb): use
		gtk_container_add/gtk_container_remove instead of reparenting widget

2007-10-25  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (applet_dbus_connection_settings_get_secrets): fix logic of adding
			secrets to hash table to pass back to NM.  Add _each_ secret
			found to the hash table and pass the whole hash back to NM.

2007-10-25  Dan Williams  <dcbw@redhat.com>

	* src/wireless-dialog.c
		- (get_default_type_for_security): avoid dereferencing auth_alg when
			it's NULL

2007-10-25  Dan Williams  <dcbw@redhat.com>

	* src/wireless-security/ws-wpa-psk.c
		- (ws_wpa_psk_new): hide Type combo as it's not being used yet

2007-10-24  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (file_to_g_byte_array): handle PEM format certificates too

2007-10-24  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (add_seen_bssid): don't segfault when the AP's bssid isn't valid

2007-10-24  Dan Williams  <dcbw@redhat.com>

	* src/menu-items.h
	  src/menu-items.c
		- (nm_network_menu_item_set_ssid): use nm_utils_ssid_to_utf8()
		- (eel_make_valid_utf8, nm_menu_network_escape_essid_for_display):
			remove

2007-10-24  Dan Williams  <dcbw@redhat.com>

	* src/wireless-security/wireless-security.c
	  src/wireless-security/wireless-security.h
		- (ws_802_1x_auth_combo_init): add a 'default_method' argument used to
			pick the default EAP method when shown to the user

	* src/wireless-security/ws-dynamic-wep.c
	  src/wireless-security/ws-dynamic-wep.h
	  src/wireless-security/ws-wpa-eap.c
	  src/wireless-security/ws-wpa-eap.h
		- Handle 'default_method' argument

	* src/wireless-dialog.c
		- (device_combo_changed): pass NMConnection to security_combo_init() if
			available
		- (get_default_type_for_security): determine the default overall
			security type for a specific connection to better show defaults
			in the UI
		- (security_combo_init): pick the right default security based on 
			the given NMConnection, if any; if the AP is capable of WPA or WPA2
			then don't show the static WEP or LEAP options; pass the connection
			along to the WPA-EAP and Dynamic WEP security items

2007-10-24  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (get_security_for_ap): don't allow options the device can't do; fix
			the 'pairwise' argument in calls to add_ciphers_from_flags(); 
			implement the WPA[2] Enterprise bits
		- (new_auto_wireless_setting): pass the device capabilities to
			get_security_for_ap()

2007-10-23  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (applet_dbus_connection_settings_changed): don't update a connection
			and send out the updated signal unless the connection is really
			updated

2007-10-23  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (match_cipher, security_compatible): remove, use
			nm_utils_ap_security_compatible() from libnm-util
		- (nm_ap_check_compatible): check BSSID too
		- (save_secrets_to_keyring): remove
		- (get_secrets_dialog_response_cb): save entire connection to GConf
			rather than just saving secrets, allows the user to change security
			settings for APs for which NM can't determine the security
			(LEAP and Dynamic WEP) and also switch EAP methods correctly

2007-10-23  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
	  src/applet-dbus-settings.h
		- (applet_dbus_settings_get_by_connection): new function; return the
			AppletDbusConnectionSettings object that wraps an NMConnection

2007-10-22  Dan Williams  <dcbw@redhat.com>

	* src/applet.glade
	  src/wireless-security/ws-dynamic-wep.c
	  src/wireless-security/ws-dynamic-wep.h
	  src/wireless-security/Makefile.am
	  src/wireless-dialog.c
		- Add Dynamic WEP authentication option

2007-10-22  Dan Williams  <dcbw@redhat.com>

	* src/wireless-security/ws-wpa-eap.c
		- Use generic 802.1x methods from wireless-security.c

2007-10-22  Dan Williams  <dcbw@redhat.com>

	* src/wireless-security/wireless-security.c
	  src/wireless-security/wireless-security.h
		- (ws_802_1x_auth_combo_init, ws_802_1x_auth_combo_changed,
		   ws_802_1x_validate, ws_802_1x_add_to_size_group,
		   ws_802_1x_fill_connection): genericize 802.1x-related methods so that
			both WPA-EAP and Dynamic WEP can use them

2007-10-21  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (other_wireless_response_cb): do something with the connection the
			user specified in the other wireless network dialog

2007-10-19  Dan Williams  <dcbw@redhat.com>

	The applet needs to save only _paths_ to certificates, not the actual
	contents itself.  NetworkManager needs the contents though, so keep track
	of the paths in GConf and then put the contents of a certificate into the
	connection right before sending it back to NetworkManager.

	* src/gconf-helpers/gconf-helpers.c
		- (read_one_setting_value_from_gconf): intercept and read certificate
			paths
		- (copy_one_setting_value_to_gconf): intercept and write certificate
			paths

	* src/applet-dbus-settings.c
	  src/applet-dbus-settings.h
		- (applet_dbus_settings_connection_fill_certs): read certificate files
			and stuff their contents into the connection object
		- (applet_dbus_settings_connection_clear_filled_certs): clear out
			certificate contents from the connection object
		- (applet_dbus_connection_settings_changed,
		   applet_dbus_connection_settings_get_settings): convert paths to
			certificate contents when needed

	* src/wireless-security/eap-method-ttls.c
	  src/wireless-security/eap-method-tls.c
		- (fill_connection): save paths, not certificate contents

	* src/applet.c
		- (other_wireless_response_cb, get_secrets_dialog_response_cb): convert
			paths to certificate contents when needed

2007-10-19  Dan Williams  <dcbw@redhat.com>

	* src/applet.glade
	  src/wireless-security/eap-method-tls.c
		- Allow hiding of the private key password

2007-10-19  Dan Williams  <dcbw@redhat.com>

	* nm-applet.conf
		- Define and lock down the Connection.Secrets interface

	* src/applet-marshal.list
	  src/applet-dbus-settings.c
	  src/applet-dbus-settings.h
		- Don't handle secrets UI here; instead emit signals and let the
			applet code handle the UI bits
		- (applet_dbus_settings_class_init): add new-secrets-requested signal
		- (connection_new_secrets_requested_cb): proxy signals from connection
			objects
		- (connections_changed_cb, get_connections,
		   applet_dbus_settings_add_connection): connect to the
			new-secrets-requested signal of connection objects
		- (applet_dbus_connection_settings_class_init): add new-secrets-requested
			signal
		- (get_secrets): remove
		- (applet_dbus_connection_settings_get_secrets): when new secrets are
			requested, emit a signal and let the listener handle the request

	* src/applet.c
		- (save_secrets_to_keyring): write secrets from a connection to the
			keyring
		- (get_secrets_dialog_response_cb): new function
		- (get_connection_details): track down a specific connection in the
			active connection list
		- (applet_settings_new_secrets_requested_cb): display UI for getting
			wireless secrets

	* src/wireless-dialog.c
		- (create_device_model): be sure to update number of devices before
			returning
		- (security_combo_init): fix placement of WEP passphrase option
		- (dialog_init): don't leave focus on the ssid entry if it gets hidden

2007-10-17  Dan Williams  <dcbw@redhat.com>

	* src/wireless-dialog.h
	  src/wireless-dialog.c
	  src/applet.c
		- Work with multiple wireless cards
		- Make more suitable to password entry as opposed to full-blown
			Other Network setup

2007-10-17  Dan Williams  <dcbw@redhat.com>

	* nm-applet.desktop
		- Remove OnlyShowIn; the applet is supposed to be shown anywhere anyway
			(rh #336021)

2007-10-16  Dan Williams  <dcbw@redhat.com>

	* src/applet.glade
	  src/wireless-security/eap-method-ttls.h
	  src/wireless-security/eap-method-ttls.c
	  src/wireless-security/eap-method-simple.h
	  src/wireless-security/eap-method-simple.c
	  src/wireless-security/eap-method.h
	  src/wireless-security/Makefile.am
	  src/wireless-security/ws-wpa-eap.c
		- Add EAP-TTLS and a few simple EAP phase2 widgets

2007-10-16  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_context_menu_update): Wireless Enabled item should be insensitive
			when wireless is disabled in hardware and when NM is asleep

2007-10-16  Dan Williams  <dcbw@redhat.com>

	* src/wireless-security/eap-method-leap.c
		- (show_toggled_cb, eap_method_leap_new): hook up "Show Password"
			checkbox

2007-10-16  Dan Williams  <dcbw@redhat.com>

	* src/applet.glade
		- Add EAP-LEAP widget

	* src/wireless-security/wireless-security.h
	  src/wireless-security/wireless-security.c
		- (wireless_security_get_g_type): new function; return GType for
			WirelessSecurity objects
		- (wireless_security_ref, wireless_security_unref): add refcounting
			capability to WirelessSecurity objects
		- (wireless_security_destroy): remove; use refcounting instead
		- (wireless_security_init): centralize common WirelessSecurity init code

	* src/wireless-security/ws-wep-key.c
	  src/wireless-security/ws-leap.c
	  src/wireless-security/ws-wpa-psk.c
	  src/wireless-security/ws-wep-passphrase.c
		- Use common WirelessSecurity init code
		- Fix xml->glade_file typo in init method of some WirelessSecurity objects

	* src/wireless-security/eap-method.h
	  src/wireless-security/eap-method.c
		- (eap_method_get_g_type): new function; return GType for EAPMethod
			objects
		- (eap_method_ref, eap_method_unref): add refcounting capability to
			EAPMethod objects
		- (eap_method_destroy): remove; use refcounting instead
		- (eap_method_init): centralize common EAPMethod init code

	* src/wireless-security/ws-wpa-eap.c
		- Use common WirelessSecurity init code
		- (destroy): let the Authentication combo hold references to EAPMethods
			and destroy them when the combo's model gets destroyed
		- (validate, fill_connection, auth_combo_changed_cb): need to unref the
			EAPMethod after getting it from the list store
		- (add_to_size_group): be sure to ref the size group because it gets
			kept around; need to unref the EAPMethod after getting it from the
			list store
		- (auth_combo_init): add EAP-LEAP to the available authentication
			methods; unref the EAPMethod after the list store takes it; unref
			the Authentication list store after the combo box takes it
		- (ws_wpa_eap_new): Use common WirelessSecurity init code

	* src/wireless-security/eap-method-tls.c
		- (eap_method_tls_new): Use common EAPMethod init code

	* src/wireless-security/Makefile.am
	  src/wireless-security/eap-method-leap.h
	  src/wireless-security/eap-method-leap.c
		- Add EAP-LEAP method

	* src/wireless-dialog.c
		- (security_combo_changed, ssid_entry_changed): need to unref the
			WirelessSecurity object after getting it from the list store
		- (create_device_model): change device column in list store to a
			G_TYPE_OBJECT so that the list store will refcount the devices
		- (destroy_device_model): don't need to free devices because the list
			refcounts them
		- (destroy_security_model): remove; WirelessSecurity objects are
			refcounted now
		- (add_security_item): drop the initial reference on the security
			object because the list store is now handling references
		- (security_combo_init): change the WirelessSecurity column object
			to be a boxed type so that refcounting can work; don't need to
			have a destroy handler for the list store anymore; unref the
			security list store because it's handled by dialog destruction
		- (dialog_init): unref the device after getting it from the list store
		- (nma_wireless_dialog_get_connection): unref the WirelessSecurity
			object after getting it from the list store

2007-10-16  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (get_security_for_ap): ->proto is now a GSList

2007-10-16  Tambet Ingo  <tambet@gmail.com>

	* src/gconf-helpers/gconf-helpers.c (nm_gconf_read_connection): Don't pick
	connection settings by name from gconf, get everything and use an anonymous
	setting creator.

2007-10-16  Tambet Ingo  <tambet@gmail.com>

	* src/applet.c (get_security_for_ap): Wireless security protocol is a GSList
	of strings, not a string.

2007-10-15  Dan Williams  <dcbw@redhat.com>

	* src/applet.glade
		- Remove border widths on subwidgets so they align better with the
			wireless-dialog
		- Make all labels left-aligned
		- Implement WPA-EAP widget
		- Implement EAP-TLS method widget

	* src/wireless-security/wireless-security.c
	  src/wireless-security/wireless-security.h
		- (ws_wpa_fill_default_ciphers): generic function for filling in default
			WPA ciphers

	* src/wireless-security/ws-wpa-psk.c
		- (src/wireless-security/ws-wpa-psk.c): use ws_wpa_fill_default_ciphers()

	* src/wireless-security/ws-wpa-eap.c
	  src/wireless-security/ws-wpa-eap.h
		- Implement shell WPA-EAP widget

	* src/wireless-security/Makefile.am
	  src/wireless-security/eap-method.c
	  src/wireless-security/eap-method.h
		- Implement EAP method superclass

	* src/wireless-security/eap-method-tls.c
	  src/wireless-security/eap-method-tls.h
		- Implement EAP-TLS UI bits

	* src/wireless-dialog.c
		- (security_combo_init): add WPA-EAP options; don't leak wireless
			security widgets on dialog destruction

2007-10-14  Dan Williams  <dcbw@redhat.com>

	* src/wireless-security/wireless-security.h
	  src/wireless-security/Makefile.am
	  src/wireless-security/ws-leap.c
	  src/wireless-security/ws-leap.h
	  src/wireless-dialog.c
		- Add LEAP support

2007-10-14  Dan Williams  <dcbw@redhat.com>

	* src/applet.glade
		- Fix up LEAP widget
		- Add max length constraints on some security widgets

2007-10-13  Dan Williams  <dcbw@redhat.com>

	* src/Makefile.am
	  src/sha1.h -> src/wireless-security/sha1.h
	  src/sha1.c -> src/wireless-security/sha1.c
	  src/wireless-security/ws-wpa-psk.h
	  src/wireless-security/ws-wpa-psk.c
	  src/wireless-security/wireless-security.h
	  src/wireless-security/Makefile.am
		- Add WPA-PSK passphrase and hex support

2007-10-13  Dan Williams  <dcbw@redhat.com>

	* src/wireless-security/Makefile.am
	  src/wireless-security/ws-wep-passphrase.c
	  src/wireless-security/ws-wep-passphrase.h
	  src/wirelees-security/wireless-security.h
	  src/wireless-dialog.c
		- Add WEP passphrase support

2007-10-13  Dan Williams  <dcbw@redhat.com>

	* src/utils/Makefile.am
	  src/Makefile.am
	  configure.ac
	  src/utils/utils.c
	  src/utils/utils.h
	  src/gnome-keyring-md5.c -> src/utils/gnome-keyring-md5.c
	  src/gnome-keyring-md5.h -> src/utils/gnome-keyring-md5.h
		- Move gnome-keyring-md5 stuff to a library that both the applet and
			the wireless security stuff can easily use
		- Put utils_bin2hexstr() in utils.c

	* src/wireless-security/ws-wep-key.c
	  src/wireless-security/Makefile.am
		- (fill_connection): Use utils_bin2hexstr() from src/utils/
	  
2007-10-13  Dan Williams  <dcbw@redhat.com>

	* src/wireless-security/wireless-security.c
	  src/wireless-security/wireless-security.h
	  src/wireless-security/ws-wep-key.c
	  src/wireless-security/ws-wep-key.h
	  src/wireless-security/Makefile.am
	  src/Makefile.am
	  configure.ac
		- wireless security UI bits; to be statically linked into both the
			applet and the connection editor

	* src/wireless-dialog.c
	  src/wireless-dialog.h
	  src/applet.glade
		- Implement wireless dialog using security UI bits

	* src/applet.c
		- (other_wireless_activate_cb, other_wireless_response_cb): hook
			wireless dialog up to Connect to Other Network...

2007-10-12  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
	  src/applet.h
		- (nma_schedule_warning_dialog): don't need an 'applet' argument

2007-10-12  Tambet Ingo  <tambet@gmail.com>

	* src/applet.c: Don't hard code the property names of the libnm-glib classes,
	use the defined strings.
	(notify_ap_prop_changed_cb): Fix a typo to include the AP flags property to hash
	calculation.

2007-10-10  Dan Williams  <dcbw@redhat.com>

	* src/gconf-helpers/gconf-helpers.h
	  src/gconf-helpers/gconf-helpers.c
		- (nm_gconf_write_connection): add optional filter function so callers
			can choose not to write some keys

	* src/vpn-properties/nm-vpn-properties.c
		- (write_vpn_connection_to_gconf): update for changes to
			nm_gconf_write_connection()

	* src/applet-dbus-settings.c
		- (applet_dbus_connection_settings_changed,
		   applet_dbus_connection_settings_new,
		   applet_dbus_connection_settings_new_from_connection): fill in VPN
			setting default username
		- (applet_dbus_connection_settings_save, vpn_user_name_filter_cb): don't
			write the VPN setting's 'user_name' key to GConf since it's supposed
			to be transient

2007-10-09  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_add_networks_helper): don't calculate AP hashes in hot paths
		- (foo_device_added_cb, access_point_added_cb,
		   notify_ap_prop_changed_cb): calculate the AP hashes when NM notifies
			us of the AP, which isn't in a path that impacts UI speed

2007-10-09  Dan Williams  <dcbw@redhat.com>

	* src/gconf-helpers/gconf-helpers.c
		- (read_one_setting_value_from_gconf): don't warn on failed reads from
			GConf (ie, where key doesn't exist)

2007-10-09  Tambet Ingo  <tambet@gmail.com>

	Now with 100% less compiler warnings!

	* src/gconf-helpers/gconf-helpers.c (read_one_setting_value_from_gconf): Remove
	a compiler warning for trying to store int value to uint variable. Add a runtime
	warning if a negative value is casted to unsigned integer.

	* src/password-dialog.c (nma_wpa_passphrase_to_hex): Cast the bssid data to char.

	* src/nm-utils.[ch]: Remove, it's part of libnm-utils.

	* src/vpn-connection-info.c: Use gconf_entry_unref() instead of deprecated
	gconf_entry_free().

	* src/menu-items.c (nm_network_menu_item_class_dispose): Remove an unused variable.

	* src/applet-dbus-settings.c: Include "vpn-password-dialog.h".
	(applet_dbus_connection_settings_new_from_connection): Remove a typo.

	* src/applet.c: Use (gtk_menu_item_remove_submenu) only for gtk+ versions lower
	than 2.12.0 and (gtk_menu_item_set_submenu) for higher versions as it is deprecated
	now.
	(show_vpn_state): Use a "default" label in switch to avoid compiler warnings.
	(nma_menu_disconnect_vpn_item_activate): Remove unused variables.
	(foo_device_state_changed_cb): Ditto.
	(ap_hash): Return unsigned char string.
	(nma_menu_device_add_access_points): Remove an unused variable.
	(get_connection_settings_for_device): Ditto.
	(notify_active_ap_changed_cb): Ditto.

	* src/vpn-properties/nm-vpn-properties.c (vpn_druid_vpn_details_page_next): Hide if
	the gtk version is at least 2.10.0.

	* src/gconf-helpers/gconf-helpers.c (copy_one_setting_value_to_gconf):
	Fix a typo: the printf string for guint64 is "%llu", not "%ull".

	* src/applet.c (nma_is_empty_ssid): Remove, use it from libnm-utils.
	(nma_escape_ssid): Ditto.
	(nm_utils_same_ssid): Ditto.

2007-10-08  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (find_duplicate, nma_add_networks_helper): when multiple wireless
			cards are in use, use the device to differentiate between duplicate
			APs in the menu.  Each card should have it's own list of APs and
			duplicates.

2007-10-08  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_setup_widgets): make the size group control both horizontal and
			vertical size so that AP items in the menu are always a consistent
			vertical size as well

2007-10-08  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (new_auto_wireless_setting, nma_menu_item_activate): split out
			creation of a new wireless, and only autoconnect by _default_ if the
			SSID is not a manufacturer default SSID like 'linksys' or 'NETGEAR'

2007-10-07  Dan Williams  <dcbw@redhat.com>

	* src/gconf-helpers/gconf-helpers.c
		- (read_one_setting_value_from_gconf, copy_one_setting_value_to_gconf):
			save UINT64s as strings, because single-precision floats are not
			precise enough at the large values of time(2) to be used, and GConf
			doesn't do either UINT64 or double

2007-10-06  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (applet_dbus_connection_settings_save): explicitly send a GConf
			notification since sometimes it seems to get lost in the GConfClient
			cache

2007-10-05  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (foo_wireless_state_change): add the BSSID of the AP NM just connected
			to to the seen-bssids list
		- (foo_device_state_changed_cb): refactor active connection search code
			into get_connection_settings_for_device()
		- (foo_device_state_changed): update active connections before
			device specific handlers
		- (add_seen_bssid): new function; add BSSID of the given AP to the
			given connection's seen-bssids list if its not in the list yet
		- (notify_active_ap_changed_cb, foo_device_added_cb): handle active
			network changes and add new AP's BSSID to the seen-bssids list

2007-10-05  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
	  src/applet.h
		- (foo_bssid_strength_changed): don't access the property directly,
			use the wrapper so that strength will get updated from D-Bus
			if needed
		- (foo_wireless_state_change): clean up periodic strength update code

2007-10-05  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_add_networks_helper): better solution to matching active AP
			with the correct menu item; also block emission of 'activate'
			signal when marking the currently active AP in the menu so that
			unintended activations don't occur

2007-10-05  Dan Williams  <dcbw@redhat.com>

	* src/menu-items.c
	  src/menu-items.h
		- (nm_network_menu_item_find_dupe, nm_network_menu_item_add_dupe): new
			functions; need to keep track of duplicates when collapsing
			APs for display in the menu so that the right menu item can be
			checked for the active AP

	* src/applet.c
		- (nma_add_networks_helper, nma_menu_device_add_access_points): store
			the active access point and check only the menu item that
			corresponds to it

2007-10-04  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (foo_device_state_changed_cb): if device is in state ACTIVATED,
			find the connection that is activated for this device and update
			it's timestamp
		- (foo_device_state_changed): don't print connection out any more
		- (foo_client_state_change): don't try to destroy an invalid hash table

2007-10-04  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.h
	  src/applet-dbus-settings.c
		- (applet_dbus_connection_settings_save): new function; write a
			connection to GConf
		- (applet_dbus_settings_init): listen to GConf key changes for the
			entire connections directory, not each connection's own directory.
			Lets the applet get notifications when connections are removed or
			added.
		- (applet_dbus_settings_finalize): clean up GConf notifiers
		- (connections_changed_cb): handle connection additions, deletions,
			and changes
		- (applet_dbus_settings_get_by_gconf_path): new function
		- (applet_dbus_connection_settings_finalize): no longer clean up GConf
			stuff here
		- (applet_dbus_connection_settings_changed): renamed from
			connection_settings_changed_cb(), and validate the connection after
			re-reading it from GConf and return FALSE if the connection is no
			longer valid (and emit the Removed signal for the connection)
		- (applet_dbus_connection_settings_new): verify connection that was
			just read from GConf and return NULL if it's invalid
		- (applet_dbus_connection_settings_save): write an updated connection
			to GConf
		- (applet_dbus_connection_settings_new_from_connection): verify the
			connection that is passed in before using it

2007-10-03  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
	  src/menu-items.c
		- Fixups for Network -> AccessPoint changes in NM

2007-10-03  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
	  src/applet.h
		- (get_first_active_device): use active connection list now
		- (nma_menu_device_add_networks, nma_add_networks_helper): don't depend
			on only the active SSID, use the active connection to find out what
			AP should be marked in the menu
		- (clear_active_connections, foo_device_state_changed): update active
			connections when a device's state changes
		- (foo_client_state_change): clear active connections when NM goes away
		- (void nma_finalize): clear active connections on quit

2007-10-01  Dan Williams  <dcbw@redhat.com>

	* src/gconf-helpers/gconf-helpers.c
		- (read_one_setting_value_from_gconf, copy_one_setting_value_to_gconf):
			handle new UINT64 type, but since GConf can't do uint64, use
			floats instead
		- (nm_gconf_get_float_helper, nm_gconf_set_float_helper): new functions

2007-10-01  Dan Williams  <dcbw@redhat.com>

	Patch from Matthias Clasen <mclasen@redhat.com>  (rh #307921)

	* src/applet.c
		- (nma_status_icon_size_changed_cb): actually redraw icons when the
			applet's size changes
		- (foo_wireless_state_change, foo_wired_state_change,
		   foo_device_state_changed_cb, foo_device_state_changed,
		   foo_device_added_cb, foo_client_state_change_cb,
		   foo_client_state_change, foo_setup_client_state_handlers,
		   foo_manager_running_cb, foo_manager_running, foo_set_initial_state,
		   foo_client_setup): add a 'synthetic' argument to functions that
			emit notifications to suppress notification events that are
			generated by internal state updates (ie, on launch when reading
			initial NM state)

2007-10-01  Dan Williams  <dcbw@redhat.com>

	Patch from St√©phane Loeuillet <leroutier@gmail.com>

	* nm-applet.desktop
		- Use XDG standard autostart directory
		- Bring up to spec; remove deprecated Encoding tag; remove --sm-disable
			because it's not session-managed anymore (rh #313031)

2007-10-01  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_send_event_notification, nma_show_notification_dialog): new
			functions; notify the user of important events via either the
			notification system or a dialog box
		- (show_vpn_state): notify the user of important VPN related events
		- (vpn_connection_state_changed): handle new 'reason' argument to
			VPN connection state changes
		- (foo_client_state_change): clear the VPN state when NM goes away

	* src/Makefile.am
		- remove standalone notification bits

2007-10-01  Tambet Ingo  <tambet@gmail.com>

	* src/applet.c (activate_device_cb): Implement a place holder which will show
	a beautiful error dialog if device activation fails.
	(nma_menu_item_activate): Use the new device activation method.

2007-10-01  Jeremy Katz  <katzj@redhat.com>

	* src/password-dialog.c, src/applet.glade:
	        - (showpasscb_toggled_cb): Hide password by default, cb to show

2007-09-30  Dan Williams  <dcbw@redhat.com>

	* src/password-dialog.c
		- Fix spacing
		- (nma_wpa_passphrase_to_hex): handle SSIDs with NULL bytes, indicate
			errors
		- (response_cb): handle errors hashing passphrase

2007-09-28  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (vpn_connection_state_changed): clean up, get rid of unused code
		- (nma_menu_vpn_item_clicked): consolidate new VPN connection code
		- (foo_client_state_change): blow away list of active VPN connections
			when NM goes away
		- (foo_add_initial_vpn_connections, foo_set_initial_state): get initial
			state of VPN connections on start too

2007-09-28  Jeremy Katz  <katzj@redhat.com>

	* src/password-dialog.c (response_cb): Fix where cancel'ing the
	password dialog would leave you unable to bring it back up (rh#311541)

	* src/applet.c (foo_client_setup): Don't show the status icon if
	NM isn't running

	* src/password-dialog.c 
	        - (update_button_cb, response_cb,
	        nma_wpa_passphrase_to_hex): Support WPA passphrases based
	        on 0.6.5 bits.
	* src/sha1.c, src/sha1.h, src/Makefile.am: Add sha1 code from 0.6.5

2007-09-28  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_menu_vpn_item_clicked, nma_menu_disconnect_vpn_item_activate,
		   nma_menu_add_vpn_submenu): for now, preserve old behavior of only
			one active VPN connection at a time.  Will be fixed later.

2007-09-27  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (get_secrets, applet_dbus_connection_settings_get_secrets): correctly
			handle VPN secrets too

2007-09-26  Dan Williams  <dcbw@redhat.com>

	* src/vpn-password-dialog.c
	  src/vpn-password-dialog.h
	  src/applet-dbus-settings.c
		- (applet_dbus_connection_settings_get_secrets): call out to the VPN
			password dialog helper bits

2007-09-25  Dan Williams  <dcbw@redhat.com>

	* src/menu-items.c
		- (wired_menu_item_new): Dim wired items based on carrier state

2007-09-25  Dan Williams  <dcbw@redhat.com>

	* src/vpn-properties/nm-vpn-properties.c
		- Fix various errors and warnings

2007-09-25  Dan Williams  <dcbw@redhat.com>

	* src/password-dialog.c
		- (response_cb): use nm_settings_new_error() to create error messages

	* src/applet-dbus-settings.c
		- (new_error): remove
		- (applet_dbus_connection_settings_get_secrets): use
			nm_settings_new_error() to create error messages

2007-09-25  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (applet_dbus_connection_settings_get_secrets): handle new 'request_new'
			parameter by asking the user for new secrets explicitly rather than
			pulling from the keyring

2007-09-24  Matthias Clasen  <mclasen@redhat.com>

	* src/applet.c (nma_menu_create): Update the icon after setting
	the icon size.

2007-09-23  Dan Williams  <dcbw@redhat.com>

	* src/vpn-properties/Makefile.am
	  src/vpn-properties/nm-vpn-properties.c
	  src/vpn-properties/nm-vpn-ui-interface.h
		- Rework the VPN UI module interface so it's based on NMConnections
			rather than a bunch of random things.  Clean up the properties
			program code a bunch and use the GConf helpers common code
			for GConf stuff

2007-09-23  Dan Williams  <dcbw@redhat.com>

	* src/gconf-helpers/gconf-helpers.h
	  src/gconf-helpers/gconf-helpers.c
	  src/applet-dbus-settings.c
		- (nm_gconf_write_connection): new function; move code that writes an
			NMConnection to GConf into the GConf helpers common code

2007-09-21  Dan Williams  <dcbw@redhat.com>

	* src/password-dialog.c
		- (update_button_cb): fix key length for 40-bit WEP

2007-09-20  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
	  src/applet.h
		- (foo_bssid_strength_changed, foo_wireless_state_change): use GObject
			property notification to get strength updates

2007-09-20  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_menu_item_activate): ensure wireless security is found; use the
			type-specific connection name rather than just "Auto"

2007-09-20  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (add_ciphers_from_flags, get_security_for_ap, nma_menu_item_activate):
			autogenerate acceptable security parameters from AP information when
			a wireless network is clicked and no compatible connection has been
			defined yet

2007-09-20  Dan Williams  <dcbw@redhat.com>

	* src/password-dialog.c
	  src/password-dialog.h
	  src/applet-dbus-settings.c
	  src/applet.glade
	  src/Makefile.am
		- Add a simple WEP/WPA-PSK password dialog for now
		- Remove cruft from applet glade file

2007-09-20  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (applet_dbus_connection_settings_get_secrets): make asynchronous to
			match libnm-glib API change

2007-09-20  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
	  src/applet-dbus-settings.h
		- (connection_settings_changed_cb, applet_dbus_connection_settings_new):
			ensure 'id' is updated
		- (applet_dbus_connection_settings_get_connection): new function

	* src/applet.c
		- (nm_utils_same_ssid, match_cipher, security_compatible,
		   nm_ap_check_compatible): gross C&P from NM to find compatible connection
		- (nma_menu_item_activate): find an existing connection to activate
			if we can
		- (nma_add_networks_helper, get_vpn_connections): warning fixes

2007-09-20  Tambet Ingo  <tambet@gmail.com>

	* src/connection-editor/nm-connection-editor.c: Use defined setting names.

	* src/connection-editor/nm-connection-list.c (nm_connection_list_finalize):
	Don't leak GConfClient.
	(load_connections): No need to use weak references, just use 
	(g_object_set_data_full).

	* src/gconf-helpers/gconf-helpers.c (property_value_destroy): Implement.
	(add_property): Implement.
	(read_one_setting_value_from_gconf): Use variable names that actually exist.
	(nm_gconf_read_connection): Ditto.

	* src/applet.c (nma_menu_item_activate): s/devtype/type/.
	(nma_menu_vpn_item_clicked): Use the new VPN activation API.
	(get_vpn_connections): Implement it. AppletDbusConnectionSettings is _SO_
	painful to work with.
	(nma_menu_add_vpn_submenu): Don't use deprecated vpn-connection-info anymore.

	* src/applet-dbus-settings.c (applet_dbus_settings_list_connections): Implement.
	(copy_one_setting_value_to_gconf): Fix some typos. Handle NM_S_TYPE_GVALUE_HASH.

	* src/gconf-helpers/gconf-helpers.c (nm_gconf_get_valuehash_helper): Implement.
	(nm_gconf_set_valuehash_helper): Implement.
	(read_one_setting_value_from_gconf): Handle NM_S_TYPE_GVALUE_HASH.
	(nm_gconf_read_connection): Read VPN data.

2007-09-20  Dan Williams <dcbw@redhat.com>

	* src/connection-editor/nm-connection-editor.glade
		- Remove PPP tab
		- Change SSID to a text field for now

2007-09-20  Dan Williams <dcbw@redhat.com>

	* src/connection-editor/nm-connection-list.c
		- (edit_connection_cb): correctly pull the NMConnection out of the
			tree view selection
		- (load_connections): keep track of the GConf path of the connection
			so that it's easier to update it later if it gets changed underneath
			the connection editor
		- (list_selection_changed_cb, nm_connection_list_init): button
			sensitivity should track selection

2007-09-20  Dan Williams <dcbw@redhat.com>

	* src/gconf-helpers/gconf-helpers.h
	  src/gconf-helpers/gconf-helpers.c
	  src/gconf-helpers/Makefile.am
	  src/connection-editor/Makefile.am
	  src/Makefile.am
	  configure.ac
		- Move gconf helpers into their own directory and make them a libtool
			library so that both the applet and the connection tool can use them
		- (nm_gconf_read_connection): new function, move bits from
			applet-dbus-settings.c that parse NMConnections from GConf

	* src/connection-editor/nm-connection-list.c
	  src/connection-editor/nm-connection-list.h
		- (hash_add_connection_to_list): ensure list is terminated when adding
			connection to list store
		- (load_connections): new function; read connection from GConf
		- (nm_connection_list_init): call load_connections(), add a cell renderer
			to the tree view widget so that connections are displayed in the list

	* src/applet-dbus-settings.c
		- (read_one_setting_value_from_gconf, read_connection_from_gconf): move
			to gconf-helpers/gconf-helpers.c
		- (connection_settings_changed_cb, applet_dbus_connection_settings_new):
			use gconf-helpers implementations for reading connection from GConf

2007-09-20  Rodrigo Moya <rodrigo@gnome-db.org>

	* src/connection-editor/Makefile.am: install Glade file in the same
	directory used by the applet.

2007-09-20  Rodrigo Moya <rodrigo@gnome-db.org>

	* src/applet.c (nma_context_menu_create): added 'Edit Connections...'
	item to the context menu.
	(nma_edit_connections_cb): added callback for the menu item.

	* src/Makefile.am: added really connection-editor to the build and
	added connection editor "widgets" to the applet's SOURCES.

	* src/connection-editor/nm-connection-editor.glade: fixed typo.

	* src/connection-editor/nm-connection-editor.[ch]:
	(nm_connection_editor_show, nm_connection_editor_run_and_close): new
	functions to make it easier to manage the underlying dialog (maybe this
	should be a GtkDialog-based class?)
	(nm_connection_editor_init): keep a reference to the dialog also.
	(nm_connection_editor_finalize): destroy the dialog.
	(dialog_response_cb): don't exit the main loop, just hide the dialog.

	* src/connection-editor/nm-connection-list.[ch]:
	(edit_connection_cb): fixed call to gtk_tree_view_get_selected_rows().
	(nm_connection_list_show, nm_connection_list_run_and_close,
	nm_connection_list_init, nm_connection_list_finalize, dialog_response_cb):
	same as in nm-connection-editor.[ch].

	* src/connection-editor/main.c (main): added missing argument to
	nm_connection_editor_new().

2007-09-19  Dan Williams <dcbw@redhat.com>

	* src/applet.c
		- (nma_menu_item_activate, nma_menu_add_create_network_item,
		   ap_hash, nma_add_networks_helper, sort_wireless_networks,
		   nma_menu_device_add_networks, foo_bssid_strength_changed,
		   foo_wireless_state_change): adapt for changes to libnm-glib, SSID
			must not be freed

2007-09-20  Rodrigo Moya <rodrigo@gnome-db.org>

	* src/connection-editor/nm-connection-editor.h: added flags for pages.
	
	* src/connection-editor/nm-connection-editor.c
	(nm_connection_editor_set_connection): use g_object_unref for
	destroying the NMConnection.
	(nm_connection_editor_new): added flags argument.

	* src/connection-editor/nm-connection-list.[ch]:
	* src/connection-editor/nm-connection-editor.glade: added connection
	list dialog.
	
2007-09-19  Rodrigo Moya <rodrigo@gnome-db.org>

	* src/connection-editor.c: fixed compilation warnings.
	(wireless_*_changed): added missing callbacks for wireless options.

2007-09-19  Rodrigo Moya <rodrigo@gnome-db.org>

	* src/connection-editor: new connection editor.

	* configure.ac: added connection editor to the build.

2007-09-16  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (read_connection_from_gconf, copy_connection_to_gconf): use new
			NMSettings value enumeration functions from libnm-util to
			simplify read/write of settings from GConf

2007-09-14  Dan Williams  <dcbw@redhat.com>

	* configure.ac
	  src/Makefile.am
	  src/applet-compat.c
	  src/applet-compat.h
	  src/applet.c
	  src/applet.h
		- Handle removal of unused stuff from libnm-util

2007-09-14  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (applet_dbus_connection_settings_new_from_connection,
		   applet_dbus_connection_settings_get_id,
		   applet_dbus_connection_settings_get_settings,
		   applet_dbus_connection_settings_get_secrets): a bit of extra
			validation of NMConnection objects

2007-09-14  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (copy_connection_to_gconf): handle lack of an 802-11-wireless-security
			setting; open networks don't need one

2007-09-14  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (read_connection_from_gconf): use the right gconf key

2007-09-14  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (applet_dbus_connection_settings_init): don't create a new NMConnection
			that's just going to get thrown away immediately anyway

2007-09-14  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (applet_dbus_settings_add_connection): send out NewConnection signal
			when adding a new connection

2007-09-14  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (foo_set_icon): don't redraw the applet icon if nothing has actually
			changed

2007-09-14  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_menu_item_activate): set the SSID of the new connection so that
			it's actually valid; don't unref the new connection since the
			AppletDBusConnectionSettings object takes ownership of it

2007-09-13  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
	  src/applet.h
		- (nma_menu_item_activate): fix for changes to nm_device_activate() in
			libnm-glib to pass connection object path rather than NMConnection
			object
		- (nma_finalize, nma_constructor): stop monitoring old GConf path for
			changes

	* src/applet-dbus-settings.c
	  src/applet-dbus-settings.h
		- (applet_dbus_settings_get_by_dbus_path): new function
		- (applet_dbus_settings_add_connection): new function; add an
			NMConnection to GConf and wrap and export it over D-Bus
		- (read_connection_from_gconf): fix gconf setting name
		- (add_keyring_item): new function; add a secret to the keyring
		- (copy_connection_to_gconf): new function; copy an NMConnection object
			to GConf and the keyring
		- (applet_dbus_connection_settings_new_from_connection): new function;
			create a new NMConnection D-Bus export wrapper from an NMConnection
			object

2007-09-13  Dan Williams  <dcbw@redhat.com>

	* src/gconf-helpers.c
	  src/gconf-helpers.h
		- (nm_gconf_set_int_helper, nm_gconf_set_string_helper, 
		   nm_gconf_set_bool_helper, nm_gconf_set_stringlist_helper,
		   nm_gconf_set_bytearray_helper): new functions

2007-09-12  Tambet Ingo  <tambet@gmail.com>

	* src/applet.c: Rewrite the VPN connection handling now that everything
	underneath has changed.

	* src/vpn-properties/nm-vpn-ui-interface.h: Convert properties to hash tables
	eveyrwhere.

	* src/vpn-properties/nm-vpn-properties.c: Create properties hash tables instead
	of GSLists.

	* src/vpn-password-dialog.c: Passwords are now dictionary items. Use odd strings
	from the helper output as keys, even keys for values.

	* src/vpn-connection-info.[ch]: Implement.

2007-09-11  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
		- (applet_dbus_connection_settings_get_secrets): fix it; need to
			specify the keyring items in a lot more detail now, using the
			connection name, the setting name, and the setting key for each
			secret

2007-09-11  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_menu_item_activate): Fix up device activation for changes
			in argument types for Activate

2007-09-09  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- Clean up applet widget creation and finalization

2007-09-06  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
	  src/applet.h
		- Random cleanups; dropdown_menu -> menu, clean up usage of
			nma_menu_clear(), kill nma_dropdown_menu_populate(), fix
			menu destruction to ensure we don't leak widgets

2007-09-06  Dan Williams  <dcbw@redhat.com>

	* src/menu-items.c
	  src/menu-items.h
		- (nm_network_menu_item_init): keep track of the hbox so it can be
			destroyed when necessary
		- (nm_network_menu_item_class_dispose, nm_network_menu_item_class_init):
			dispose of subwidgets as necessary; dispose of hash if needed

2007-09-02  Dan Williams  <dcbw@redhat.com>

	* src/applet-dbus-settings.c
	  src/applet-dbus-settings.h
		- Update user settings daemon D-Bus defines now that it's in
			NetworkManager.h
		- s/applet_connection->settings/applet_connection->connection/g since
			that's what it really is
		- Update for change of NMConnection to GObject subclass
		- (read_connection_from_gconf): clear ->id before trying to get the
			value again so that nm_gconf_get_string_helper() doesn't complain

	* src/applet.c
		- Update for change of NMConnection to GObject subclass

	* src/applet-dbus-manager.c
	  src/applet.h
		- Update user settings daemon D-Bus defines now that it's in
			NetworkManager.h

2007-08-30  Dan Williams  <dcbw@redhat.com>

	Patch from Jani Monoses <jani@ubuntu.com>

	* src/vpn-properties/clipboard.c
	  src/vpn-properties/nm-vpn-properties.glade
	  src/vpn-properties/nm-vpn-properties.c
		- Use GtkAssistant instead of GnomeDruid on GTK+ >= 2.10
		    (gnome.org #470554)

2007-08-30  Dan Williams  <dcbw@redhat.com>

	Patch from Jani Monoses <jani@ubuntu.com>

	* src/applet.c
		- (about_dialog_activate_link_cb): don't use gnome_url_open()
		(gnome.org #460671)

2007-08-30  Dan Williams  <dcbw@redhat.com>

	Patch from Jani Monoses <jani@ubuntu.com>

	* nm-applet.desktop
		- show in XFCE too (gnome.org #471608)

2007-08-29  Dan Williams  <dcbw@redhat.com>

	* nm-applet.conf
		- New D-Bus service name

	* src/applet-marshal.list
	  src/applet-marshal-main.c
	  src/applet-dbus-manager.c
	  src/applet-dbus-manager.h
	  src/applet.h
	  src/applet.c
	  src/Makefile.am
	  configure.ac
		- Move most D-Bus housekeeping over to the D-Bus manager rather
		than a lot of hardcoded junk in applet-dbus.c and applet-dbus-info.c

	* src/nm-utils.c
	  src/nm-utils.h
		- Remove functions that are no longer used

	* src/applet-dbus-info.c
	  src/applet-dbus-info.h
	  src/applet-dbus.c
	  src/applet-dbus.h
		- Remove, no longer used; some bits need to be replaced by Tambet's new
		VPN interface stuff

	* src/applet-dbus-settings.c
		- Hook up the new NMConnection/NMSettings stuff to D-Bus

	* src/menu-items.c
		- Remove no longer relevant bits

2007-08-29  Dan Williams  <dcbw@redhat.com>

	* src/gconf-helpers.c
		- (nm_gconf_get_bytearray_helper): make it really a byte array.  Code
			was previously appending ints, leading to 3 zero elements for each
			actual data element

2007-08-29  Dan Williams  <dcbw@redhat.com>

	Remove anything related to wireless-security-options, to be replaced
	by NMSettings/NMConnectionSettings.

2007-08-29  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
	  src/other-network-dialog.c
	  src/menu-items.c
		- Adjust for new AP flags

2007-08-22  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (ap_hash): fix missing return value, cleanups
		- (nma_add_networks_helper): don't try to free uninitialized memory
			if the ssid was NULL, don't try to free a NULL ssid
		- (foo_bssid_strength_changed): don't try to free a NULL ssid
		- (foo_wireless_state_change): handle NULLs better

2007-08-22  Dan Williams  <dcbw@redhat.com>

	* src/menu-items.c
	  src/menu-items.h
		- Make NMNetworkMenuItem a GtkCheckMenuItem subclass, not a random structure
			that contains all the widgets
		- Make the NMNetworkMenuItem accessors sane (split them out for SSID,
			strength, and detail instead a gigantic update() procedure)

	* src/applet.c
		- Use new NMNetworkMenuItem object
		- (nma_dropdown_menu_clear): remove children from the menu rather than
			destroying them directly
		- (sort_wireless_networks): ensure both SSIDs are valid before trying
			to access their contents
		- (nma_add_networks_helper): check for an existing menu item that
			represents this AP, based on a hash of certain AP properties.  If
			found, use that item instead of adding a new item.
		- (ap_hash): hash certain AP properties to combine BSSIDs into one menu
			item when needed

2007-08-21  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (sort_wireless_networks): fix various errors; ensure 0 is returned on
			when the two APs are equal, and don't use string comparisons because
			SSIDs can have embedded nulls as they are byte arrays, not strings

2007-08-20  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (sort_wireless_networks): new function
		- (nma_menu_device_add_networks): sort networks

2007-08-17  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
	  src/applet.h
		- (foo_update_icon, foo_set_icon, nma_finalize, nma_icons_free,
		   nma_icons_load_from_disk): use an array with slots instead of a
			list for the icon layers.  fixes races between link and VPN icon
			layers depending on which one gets set first

2007-08-15  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (foo_set_icon): add note that this is broken when VPN connection
			icon is set before main icon.  Layering here is buggy.
		- (foo_client_state_change): force an icon update of the VPN layer
			when updating the main icon
		- (foo_manager_running): remove incorrect comment

2007-08-14  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- Handle NM_VPN_STATE_* -> NM_VPN_SERVICE_STATE_* and NMVPNState -> 
			NMVPNServiceState renames
		- Handle NM_VPN_ACT_STAGE_* -> NM_VPN_CONNECTION_STATE_* and
			NMVPNActStage -> NMVPNConnectionState renames

2007-08-13  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_menu_add_vpn_menu): sort VPN connections

2007-08-13  Dan Williams  <dcbw@redhat.com>

	Patch from Michael Biebl <biebl@debian.org>

	* po/POTFILES.in
		- Update for vpn-properties move

2007-08-13  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_get_first_active_vpn_connection,
		   nma_menu_disconnect_vpn_item_activate,
		   nma_menu_add_vpn_menu): list returned from
			nm_client_get_vpn_connections() needs to be freed now
		- (foo_manager_running): set applet & vpn state to UNKNOWN when NM
			goes away

2007-08-13  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_add_networks_helper): don't show non-SSID-broadcasting APs
			in the menu

2007-08-13  Tambet Ingo  <tambet@gmail.com>

	* src/applet.c (nma_menu_device_add_networks): Fix an invalid free
	which happened in case there's no active ssid.
	(sort_devices): Implement.
	(nma_menu_add_devices): Sort the devices before adding them to the menu.

2007-08-13  Rodrigo Moya <rodrigo@gnome-db.org>

	* src/gconf-helpers.c:
	* src/applet-dbus-settings.c: fixed some compilation problems.

2007-08-13  Rodrigo Moya <rodrigo@gnome-db.org>

	* src/applet.h: added new GConf path for connection settings.

	* src/gconf-helpers.[ch] (nm_gconf_get_stringlist_helper,
	nm_gconf_get_bytearray_helper): new helper functions.

	* src/applet-dbus-settings.[ch]: added implementation of the new
	configuration interface for the GConf-based applet.

	* src/Makefile.am: added new files.

2007-08-13  Tambet Ingo  <tambet@gmail.com>

	* configure.ac: libnm-glib just got renamed to libnm_glib.
	Add src/vpn-properties/Makefile to AC_OUTPUT.

	* src/Makefile.am: Add vpn-properties to SUBDIRS.

	* src/vpn-properties/*: Move it here from NetworkManager.

2007-08-09  Tambet Ingo  <tambet@gmail.com>

	* src/applet.c (foo_wireless_state_change): Fix a memory corruption.
	

2007-07-26  Dan Williams  <dcbw@redhat.com>

	Patch from Claudio Saavedra <csaavedra@alumnos.utalca.cl>

	* src/other-network-dialog.c
		- Fix critical warning; gtk_widget_destroy already destroys the
			wireless adapter TreeModel (#438441)

2007-07-26  Dan Williams  <dcbw@redhat.com>

	Patch from Jani Monoses <jani@ubuntu.com>

	* src/main.c
		- Kill usage of GnomeClient (#436832)

2007-07-26  Dan Williams  <dcbw@redhat.com>

	Patch from Jani Monoses <jani@ubuntu.com>

	* src/applet.c
	  src/other-network-dialog.c
	  src/menu-items.c
	  configure.ac
		- Remove bits for GTK < 2.6 (#436832)

2007-06-27  Dan Williams  <dcbw@redhat.com>

	* Make SSIDs GByteArrays everywhere
	* Rename "essid" -> "ssid" everywhere that's appropriate

2007-06-22  Tambet Ingo  <tambet@ximian.com>

	* src/applet.c (nma_add_networks_helper): Fix a typo that caused crashes.

2007-06-21  Tambet Ingo  <tambet@ximian.com>

	* src/applet-dbus-info.c (nmi_dbus_get_key_for_network): Move the passphrase
	dialog creation to another function that is called from the main loop so that
	the "getKeyForNetwork" dbus call can return before the dialog asks a bunch of
	information over dbus.

2207-06-14  Christopher Aillon  <caillon@redhat.com>

	* src/applet.glade: (passphrase_required)
	Connect to a network, not log in.  (#372154)

2007-06-13  Tambet Ingo  <tambet@ximian.com>

	* src/applet.c (nma_menu_item_activate): Fix the NMSettingWireless
	creation.

2007-05-07  Tambet Ingo  <tambet@ximian.com>

	* src/applet.c (nma_menu_item_activate): Create and use a NMConnection
	for device activation.

2007-03-28  Tambet Ingo  <tambet@ximian.com>

	* src/applet-dbus-info.c (nmi_dbus_get_key_for_network): Fix a typo: we do
	want the device to be a wireless device.

2007-03-26  Tambet Ingo  <tambet@ximian.com>

	Fix VPN.
	Clean up a lot of old non-working dbus calls and data structures and replace
	them with what libnm-glib provides.

	* src/applet-dbus-devices.c
	* src/applet-dbus-devices.h
	* src/applet-dbus-vpn.c
	* src/applet-dbus-vpn.h
	* src/wireless-network.c
	* src/wireless-network.h
	* src/nm-device.c
	* src/nm-device.h
	* src/vpn-connection.c
	* src/vpn-connection.h

	Remove. All of these are provided by libnm-glib now.

2007-03-16  Tambet Ingo  <tambet@ximian.com>

	First stab at converting the applet over to libnm-glib instead of using
	the low-level DBUS API (which is removed from NM by now). Since libnm-glib
	emits signals for all "interesting" state changes in NM, we don't have to
	poll for any changes in the applet and can sleep and do nothing if there
	are no events (either from X or libnm-glib).

	The current status should be that the status icon should show the correct
	icon which reflects the NM state, right-click menu should work 100%, and
	the left click menu (devices) should show the correct information. Device
	activation should work only for wired devices. VPN doesn't work at all.
	And there's a bunch of warnings on the console.

	* configure.ac: Put all PKG-CONFIG checks in one check so that it can
	remove duplicate CFLAGS, LDFLAGS and libraries to link.

2007-02-19  Dan Williams  <dcbw@redhat.com>

	Patch from Andreas Hanke <andreas.hanke@gmx-topmail.de>

	* configure.ac
		- Remove unused bits that calculate EXPANDED_BINDIR and
			DBUS_SYSTEMD_DIR (gnome.org #409322)

2007-02-18  Dan Williams  <dcbw@redhat.com>

	Patch from Christian Persch <chpe@gnome.org>
	* src/Makefile.am
		- Don't build libegg sources when using GtkStatusIcon

2007-02-16  Dan Williams  <dcbw@redhat.com>

	* src/applet.c
		- (nma_about_cb): update copyright dates in about dialog

2007-02-16  Dan Williams  <dcbw@redhat.com>

	Patch from Luca Ferretti

	* src/applet.c
		- (nma_constructor): remove glade_gnome_init, as it is deprecated
			(Gnome.org #402468)

2007-02-08  Dan Williams  <dcbw@redhat.com>

    Patch from Chris Aillon <caillon@redhat.com>

    * src/applet-compat.c
        - (convert_one_entry): Don't attempt to pass empty ESSID paths to GConf
            (RH #216502)

***** import from NetworkManager module *****
